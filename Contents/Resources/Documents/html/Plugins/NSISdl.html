<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta name=generator content="nsis-docset-builder v0.6.0"><title>NSISdl</title><style>@font-face{font-family:'Fira Sans';src:url(../../fonts/FiraSans-Light.eot);src:local('Fira Sans Light'),url(../../fonts/FiraSans-Light.eot) format('embedded-opentype'),url(../../fonts/FiraSans-Light.woff2) format('woff2'),url(../../fonts/FiraSans-Light.ttf) format('truetype');font-weight:300;font-style:normal;font-display:swap}@font-face{font-family:'Fira Sans';src:url(../../fonts/FiraSans-Regular.eot);src:local('Fira Sans Regular'),url(../../fonts/FiraSans-Regular.eot) format('embedded-opentype'),url(../../fonts/FiraSans-Regular.woff2) format('woff2'),url(../../fonts/FiraSans-Regular.ttf) format('truetype');font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:'Fira Mono';src:url(../../fonts/FiraMono-Regular.eot);src:local('Fira Mono'),url(../../fonts/FiraMono-Regular.eot) format('embedded-opentype'),url(../../fonts/FiraMono-Regular.woff2) format('woff2'),url(../../fonts/FiraMono-Regular.woff) format('woff'),url(../../fonts/FiraMono-Regular.ttf) format('truetype');font-weight:400;font-style:normal;font-display:swap}</style><link rel=stylesheet href=../../css/theme.css><link rel=stylesheet href=../../css/highlight.css></head><body class=font-sans><div class="container mx-auto mt-8"><div class=columns-1><h1 id=nsisdl>NSISdl</h1><p>This plugin can be used from NSIS to download files via HTTP. Note: HTTPS is not supported, only plain HTTP!</p><p>To connect to the internet, use the Dialer plugin.</p><h2 id=usage>Usage</h2><pre><code class="hljs language-nsis"><span class="hljs-title function_">NSISdl::download</span> http://www.domain.com/<span class=hljs-keyword>file</span> localfile.exe
</code></pre><p>You can also pass /TIMEOUT to set the timeout in milliseconds:</p><pre><code class="hljs language-nsis"><span class="hljs-title function_">NSISdl::download</span> /TIMEOUT=<span class=hljs-number>30000</span> http://www.domain.com/<span class=hljs-keyword>file</span> localfile.exe
</code></pre><p>The return value is pushed to the stack:</p><ul><li><code>cancel</code> if cancelled</li><li><code>success</code> if success</li><li>otherwise, an error string describing the error</li></ul><p>If you don&#39;t want the progress window to appear, use NSISdl::download_quiet.</p><p>Example of usage:</p><pre><code class="hljs language-nsis"><span class="hljs-title function_">NSISdl::download</span> http://www.domain.com/<span class=hljs-keyword>file</span> localfile.exe
<span class=hljs-keyword>Pop</span> <span class=hljs-variable>$R0</span> <span class=hljs-comment>;Get the return value</span>
  <span class=hljs-keyword>StrCmp</span> <span class=hljs-variable>$R0</span> <span class=hljs-string>&quot;success&quot;</span> +<span class=hljs-number>3</span>
    <span class=hljs-keyword>MessageBox</span> <span class=hljs-params>MB_OK</span> <span class=hljs-string>&quot;Download failed: <span class=hljs-variable>$R0</span>&quot;</span>
    <span class=hljs-keyword>Quit</span>
</code></pre><p>For another example, see waplugin.nsi in the examples directory.</p><h3 id=proxies>Proxies</h3><p><code>NSISdl</code> supports only basic configurations of proxies. It doesn&#39;t support proxies which require authentication, automatic configuration script, etc. <code>NSISdl</code> reads the proxy configuration from Internet Explorer&#39;s registry key under <code>HKLM\Software\Microsoft\Windows\CurrentVersion\Internet Settings</code>. It reads and parses <code>ProxyEnable</code> and <code>ProxyServer</code>.</p><p>If you don&#39;t want <code>NSISdl</code> to use Internet Explorer&#39;s settings, use the <code>/NOIEPROXY</code> flag. <code>/NOIEPROXY</code> should be used after <code>/TRANSLATE</code> and <code>/TIMEOUT</code>. For example:</p><p>If you want to specify a proxy on your own, use the <code>/PROXY</code> flag.</p><pre><code class="hljs language-nsis"><span class="hljs-title function_">NSISdl::download</span> /NOIEPROXY http://www.domain.com/<span class=hljs-keyword>file</span> localfile.exe
<span class="hljs-title function_">NSISdl::download</span> /TIMEOUT=<span class=hljs-number>30000</span> /NOIEPROXY http://www.domain.com/<span class=hljs-keyword>file</span> localfile.exe
<span class="hljs-title function_">NSISdl::download</span> /PROXY proxy.whatever.com http://www.domain.com/<span class=hljs-keyword>file</span> localfile.exe
<span class="hljs-title function_">NSISdl::download</span> /PROXY proxy.whatever.com:<span class=hljs-number>8080</span> http://www.domain.com/<span class=hljs-keyword>file</span> localfile.exe
</code></pre><h3 id=translate>Translate</h3><p>To translate <code>NSISdl</code> add the following values to the call line:</p><p><code>/TRANSLATE2</code> downloading connecting second minute hour seconds minutes hours progress</p><p>Default values are:</p><ul><li><code>downloading</code> - &quot;Downloading %s&quot;</li><li><code>connecting</code> - &quot;Connecting ...&quot;</li><li><code>second</code> - &quot; (1 second remaining)&quot;</li><li><code>minute</code> - &quot; (1 minute remaining)&quot;</li><li><code>hour</code> - &quot; (1 hour remaining)&quot;</li><li><code>seconds</code> - &quot; (%u seconds remaining)&quot;</li><li><code>minutes</code> - &quot; (%u minutes remaining)&quot;</li><li><code>hours</code> - &quot; (%u hours remaining)&quot;</li><li><code>progress</code> - &quot;%skB (%d%%) of %skB @ %u.%01ukB/s&quot;</li></ul><p>The old <code>/TRANSLATE</code> method still works for backward compatibility.</p><p><code>/TRANSLATE</code> downloading connecting second minute hour plural progress remianing</p><p>Default values are:</p><ul><li><code>downloading</code> - &quot;Downloading %s&quot;</li><li><code>connecting</code> - &quot;Connecting ...&quot;</li><li><code>second</code> - &quot;second&quot;</li><li><code>minute</code> - &quot;minute&quot;</li><li><code>hour</code> - &quot;hour&quot;</li><li><code>plural</code> - &quot;s&quot;</li><li><code>progress</code> - &quot;%dkB (%d%%) of %ukB @ %d.%01dkB/s&quot;</li><li><code>remaining</code> - &quot; (%d %s%s remaining)&quot;</li></ul><p><code>/TRANSLATE</code> and <code>/TRANSLATE2</code> must come before <code>/TIMEOUT</code>.</p><h2 id=credits>Credits</h2><p>Written by Yaroslav Faybishenko and Justin Frankel.</p></div><div class="columns-1 text-right"><hr><a href=https://github.com/NSIS-Dev/Documentation/edit/main/docs/Plugins/NSISdl.md>Edit on GitHub</a></div></div></body></html>